syntax = "proto3";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

package discord_protos.users.v1;

message UserData {
  enum UserLinkType {
    USER_LINK_TYPE_UNSPECIFIED = 0;
    USER_LINK_TYPE_PARENT = 1;
    USER_LINK_TYPE_CHILD = 2;
  }

  enum UserLinkStatus {
    USER_LINK_STATUS_UNSPECIFIED = 0;
    USER_LINK_STATUS_PENDING = 1;
    USER_LINK_STATUS_ACTIVE = 2;
    USER_LINK_STATUS_INACTIVE = 3;
    USER_LINK_STATUS_DECLINED = 4;
  }

  message LinkedUser {
    fixed64 user_id = 1;
    UserLinkType link_type = 2;
    UserLinkStatus link_status = 3;
    fixed64 requestor_id = 4;
    optional google.protobuf.Timestamp created_at = 5;
    optional google.protobuf.Timestamp updated_at = 6;
  }

  message RateLimitData {
    optional google.protobuf.Timestamp limit_expiry = 1;
  }

  message FeatureLimits {
    map<uint32, RateLimitData> map = 1;
  }

  message SafetyFlag {
    optional google.protobuf.Timestamp flag_expiry = 1;
  }

  message QuestMetadata {
    uint32 quests_completed = 1;
  }

  message UserPrimaryGuild {
    optional google.protobuf.UInt64Value identity_guild_id = 1;
    optional google.protobuf.BoolValue identity_enabled = 2;
    optional google.protobuf.StringValue tag = 3;
    optional google.protobuf.StringValue badge = 4;
  }

  message CrossPlatformRestriction {
    optional google.protobuf.Timestamp restriction_expiry = 1;
    fixed64 application_id = 2;
  }

  message UserNameplate {
    string asset = 1;
    string palette = 2;
    optional google.protobuf.UInt64Value sku_id = 3;
    optional google.protobuf.Timestamp expires_at = 4;
    string label = 5;
  }

  message UserCollectibles {
    optional UserNameplate nameplate = 1;
  }

  message NormalState {
  }

  message RestrictedState {
    optional google.protobuf.Timestamp restricted_until = 1;
  }

  message DeferredActionState {
    optional google.protobuf.Timestamp action_deferred_until = 1;
  }

  message TempBannedState {
    optional google.protobuf.Timestamp banned_until = 1;
  }

  message BannedState {
  }

  enum SafetyStateReason {
    SAFETY_STATE_REASON_REASON_UNSPECIFIED = 0;
    SAFETY_STATE_REASON_DISABLED_SUSPICIOUS_ACTIVITY = 1;
    SAFETY_STATE_REASON_SMITE_REMOVE_EMAIL_VERIFICATION = 2;
    SAFETY_STATE_REASON_USER_REQUIRED_VERIFICATION_INTERVENTIONS_CLIENT = 3;
    SAFETY_STATE_REASON_ACTIVE_ASSIGNMENT_COMPLETED = 4;
    SAFETY_STATE_REASON_ACTIVE_ASSIGNMENT_CREATED = 5;
    SAFETY_STATE_REASON_DEFERRED_ASSIGNMENT_CREATED = 6;
    SAFETY_STATE_REASON_DEFERRED_ASSIGNMENT_UPGRADED_TO_ACTIVE = 7;
    SAFETY_STATE_REASON_DEFERRED_ASSIGNMENT_CANCELLED = 8;
    SAFETY_STATE_REASON_ASSIGNMENT_STATE_REPAIRED = 9;
    SAFETY_STATE_REASON_MANUAL_PERMANENT_BAN = 10;
    SAFETY_STATE_REASON_SAFETY_SYSTEM_UNBAN = 11;
    SAFETY_STATE_REASON_GENERIC_AUTOMATED_SAFETY_ACTION = 12;
    SAFETY_STATE_REASON_GENERIC_MANUAL_SAFETY_ACTION = 13;
  }

  enum SafetyAnnotations {
    SAFETY_ANNOTATIONS_ANNOTATION_UNSPECIFIED = 0;
    SAFETY_ANNOTATIONS_SPAMMER = 1;
    SAFETY_ANNOTATIONS_SELF_DELETED = 2;
    SAFETY_ANNOTATIONS_SELF_DISABLED = 3;
    SAFETY_ANNOTATIONS_UNDERAGE_DELETED = 4;
    SAFETY_ANNOTATIONS_SAFETY_POLICY_VIOLATION = 5;
    SAFETY_ANNOTATIONS_INACTIVITY_DELETED = 6;
    SAFETY_ANNOTATIONS_GENERIC_DELETED = 7;
  }

  message SafetyState {
    oneof state {
      NormalState normal = 101;
      RestrictedState restricted = 102;
      DeferredActionState deferred_action = 103;
      TempBannedState temp_banned = 104;
      BannedState banned = 105;
    }
    SafetyStateReason reason = 1;
    repeated SafetyAnnotations annotations = 2;
    optional google.protobuf.UInt64Value last_mutation_id = 3;
  }

  enum PremiumSource {
    PREMIUM_SOURCE_NONE_UNSPECIFIED = 0;
    PREMIUM_SOURCE_SUBSCRIPTION = 1;
    PREMIUM_SOURCE_FRACTIONAL_NITRO = 2;
    PREMIUM_SOURCE_REVERSE_TRIAL = 3;
    PREMIUM_SOURCE_SUBSCRIPTION_GROUP = 4;
  }

  enum PremiumSubscriptionType {
    PREMIUM_SUBSCRIPTION_TYPE_NONE_UNSPECIFIED = 0;
    PREMIUM_SUBSCRIPTION_TYPE_BOOST_ONLY = 1;
    PREMIUM_SUBSCRIPTION_TYPE_TIER_0 = 2;
    PREMIUM_SUBSCRIPTION_TYPE_TIER_1 = 3;
    PREMIUM_SUBSCRIPTION_TYPE_TIER_2 = 4;
  }

  enum PremiumSubscriptionGroupRole {
    PREMIUM_SUBSCRIPTION_GROUP_ROLE_UNSPECIFIED = 0;
    PREMIUM_SUBSCRIPTION_GROUP_ROLE_PRIMARY = 1;
    PREMIUM_SUBSCRIPTION_GROUP_ROLE_MEMBER = 2;
  }

  message PremiumState {
    PremiumSource premium_source = 1;
    PremiumSubscriptionType premium_subscription_type = 2;
    PremiumSubscriptionGroupRole premium_subscription_group_role = 3;
  }

  enum DisplayNameFont {
    DISPLAY_NAME_FONT_UNSPECIFIED = 0;
    DISPLAY_NAME_FONT_DEFAULT = 11;
    DISPLAY_NAME_FONT_BANGERS = 1;
    DISPLAY_NAME_FONT_BIO_RHYME = 2;
    DISPLAY_NAME_FONT_CHERRY_BOMB = 3;
    DISPLAY_NAME_FONT_CHICLE = 4;
    DISPLAY_NAME_FONT_COMPAGNON = 5;
    DISPLAY_NAME_FONT_MUSEO_MODERNO = 6;
    DISPLAY_NAME_FONT_NEO_CASTEL = 7;
    DISPLAY_NAME_FONT_PIXELIFY = 8;
    DISPLAY_NAME_FONT_RIBES = 9;
    DISPLAY_NAME_FONT_SINISTRE = 10;
    DISPLAY_NAME_FONT_ZILLA_SLAB = 12;
  }

  enum DisplayNameEffect {
    DISPLAY_NAME_EFFECT_UNSPECIFIED = 0;
    DISPLAY_NAME_EFFECT_SOLID = 1;
    DISPLAY_NAME_EFFECT_GRADIENT = 2;
    DISPLAY_NAME_EFFECT_NEON = 3;
    DISPLAY_NAME_EFFECT_TOON = 4;
    DISPLAY_NAME_EFFECT_POP = 5;
    DISPLAY_NAME_EFFECT_GLOW = 6;
  }

  message DisplayNameStyles {
    DisplayNameFont font_id = 1;
    DisplayNameEffect effect_id = 2;
    repeated uint32 colors = 3;
  }

  message StoreCountry {
    string country = 1;
    optional google.protobuf.Timestamp set_at = 2;
  }

  message TimeOfDay {
    int32 hours = 1;
    int32 minutes = 2;
    int32 seconds = 3;
    int32 nanos = 4;
  }

  enum DayOfWeek {
    DAY_OF_WEEK_UNSPECIFIED = 0;
    DAY_OF_WEEK_MONDAY = 1;
    DAY_OF_WEEK_TUESDAY = 2;
    DAY_OF_WEEK_WEDNESDAY = 3;
    DAY_OF_WEEK_THURSDAY = 4;
    DAY_OF_WEEK_FRIDAY = 5;
    DAY_OF_WEEK_SATURDAY = 6;
    DAY_OF_WEEK_SUNDAY = 7;
  }

  message ScheduleRule {
    string rule_id = 1;
    string label = 2;
    optional TimeOfDay start_time = 3;
    optional TimeOfDay end_time = 4;
    repeated DayOfWeek days = 5;
  }

  message RestrictedSchedule {
    repeated ScheduleRule rules = 1;
  }

  map<fixed64, LinkedUser> linked_users = 1;
  map<uint32, FeatureLimits> safety_feature_limits = 2;
  map<uint32, SafetyFlag> safety_flags = 3;
  optional QuestMetadata quest = 4;
  optional UserPrimaryGuild primary_guild = 5;
  optional CrossPlatformRestriction cross_platform_restriction = 6;
  optional UserCollectibles collectibles = 7;
  optional SafetyState safety_state = 8;
  optional PremiumState premium_state = 9;
  optional DisplayNameStyles display_name_styles = 10;
  optional StoreCountry store_country = 11;
  optional RestrictedSchedule restricted_schedule = 12;
}
